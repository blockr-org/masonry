(()=>{"use strict";Shiny;const a=()=>"_"+Math.ceil(1e7*Math.random()),t={},n=(a,n)=>{const i=$(a).attr("id");n.group=i,((a,n)=>{t[`#${a}`]=n})(i,n),s(a,n),((a,t)=>{$(a).find(".masonry-item").on("mouseup",(a=>{$(a.target).trigger("resize")}))})(a),$(a).addClass("masoned"),o(a,n)},s=(a,t)=>{$(a).find(".masonry-row").each(((a,n)=>{i(n,t)}))},i=(t,n)=>{const s=$(t).data("masonry-minheight");$(t).css("min-height",s);const i=$(t).data("masonry-height");i&&$(t).css("height",i),$(t).attr("id",a()),d(t,n),e(t,n),o(t,n)},e=(a,t)=>{$(a).find(".masonry-item").each(((a,n)=>{r(n,t)}))},r=(t,n)=>{n.padding&&$(t).css("padding",n.padding),n.margin&&$(t).css("margin",n.margin);let s=$(t).data("masonry-width");s||(s=20),$(t).css("width",`${s}%`);let i=a();$(t).attr("id",i)},o=(a,t)=>{let n={multiDrag:!1,fallbackTolerance:2,animation:150,swap:!1};t.group&&(n.group=t.group),new Sortable(a,n)},d=(a,t)=>{let n=[];if($(a).find(".masonry-item").each(((a,t)=>{n.push($(t).data("masonry-width")||.2)})),0==n.length)return;let s=n.reduce(((a,t)=>a+t));if(s<100){let t=100-s;$(a).find(".masonry-item").last().data("masonry-width",n[n.length-1]+t)}let i=s-100;$(a).find(".masonry-item").last().data("masonry-width",n[n.length-1]-i)};jQuery.fn.extend({masonry:function(a){((a,t)=>{((a,t)=>{$(a).hasClass("masonry-main")?n(a[0],t):$(a).find(".masonry-main").each(((a,s)=>{n(s,t)}))})(this,t=t||{})})(0,a)}}),Shiny.addCustomMessageHandler("masonry-init",(a=>{$(`${a.target}`).masonry()})),Shiny.addCustomMessageHandler("masonry-add-row",(a=>{let n=`<div \n    class='masonry-row d-flex ${a.classes}'\n    data-masonry-minheight = ${a.min_height}\n    data-masonry-height = ${a.height}\n    ></div>`,s=$(`${a.target}`).find(".masonry-main-content");var i;"bottom"==a.position&&s.append(n),"top"==a.position&&s.prepend(n),i=a.target,t[i],$(`${a.target}`).masonry()}))})();